import org.junit.Assert;
import org.junit.Test;
import at.aau.itec.minecraft.serverstateloggingplugin.statechange.NbtDiffIter;

import java.util.Arrays;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;

// https://www.jetbrains.com/help/idea/configuring-testing-libraries.html
// https://www.jetbrains.com/help/idea/tdd-with-intellij-idea.html
public class NbtDiffIterTest {

    @Test
    public void testEqual() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = nbtprev;
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Assert.assertEquals(0, result.size());
    }

    @Test
    public void testPositionChange() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[447.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Pos/[0]:446.5d", " + Pos/[0]:447.5d");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testTopLevelChange() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42157,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Spigot.ticksLived:42147", " + Spigot.ticksLived:42157");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testTopLevelChangeIgnore() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42157,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, Arrays.asList("Spigot.ticksLived"));
        System.out.println(result);

        Assert.assertArrayEquals(new String[]{}, result.toArray());
    }

    @Test
    public void testLowerLevelArrayItemChange() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188453L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Attributes/[5]/Modifiers/[0]/UUIDMost:-3095412869162188453L", " + Attributes/[5]/Modifiers/[0]/UUIDMost:-3095412869162188454L");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testCombinedChange() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188453L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42157,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Attributes/[5]/Modifiers/[0]/UUIDMost:-3095412869162188453L", " + Attributes/[5]/Modifiers/[0]/UUIDMost:-3095412869162188454L", " - Spigot.ticksLived:42147", " + Spigot.ticksLived:42157");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testAddedTopLevelKey() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" + Angry:0b");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testRemovedTopLevelKey() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Angry:0b");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testAddedLowerLevelKey() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" + Attributes/[1]/Base:0.0d");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testRemovedLowerLevelKey() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Attributes/[1]/Base:0.0d");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testAddedListItem() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        // adding/deleting one item from the middle causes the later ones to "shift backward/forward" -> many "changes"
        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Attributes/[2]/Base:0.0d", " + Attributes/[2]/Base:0.30000001192092896d", " - Attributes/[2]/Name:\"generic.armor\"", " + Attributes/[2]/Name:\"generic.movementSpeed\"", " - Attributes/[3]/Name:\"generic.armorToughness\"", " + Attributes/[3]/Name:\"generic.armor\"", " - Attributes/[4]/Base:16.0d", " + Attributes/[4]/Base:0.0d", " - Attributes/[4]/Name:\"generic.followRange\"", " + Attributes/[4]/Name:\"generic.armorToughness\"", " - Attributes/[4]/Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}]", " - Attributes/[5]/Base:4.0d", " + Attributes/[5]/Base:16.0d", " - Attributes/[5]/Name:\"generic.attackDamage\"", " + Attributes/[5]/Name:\"generic.followRange\"", " + Attributes/[5]/Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}]", " + Attributes/[6]:{Base:4.0d,Name:\"generic.attackDamage\"}");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testRemovedListItem() throws Exception{
        String nbtprev = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.30000001192092896d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";
        String nbtnext = "{AgeLocked:0b,HurtByTimestamp:0,Angry:0b,Sitting:0b,Attributes:[{Base:8.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:16.0d,Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}],Name:\"generic.followRange\"},{Base:4.0d,Name:\"generic.attackDamage\"}],Invulnerable:0b,FallFlying:0b,ForcedAge:0,PortalCooldown:0,AbsorptionAmount:0.0f,FallDistance:0.0f,InLove:0,DeathTime:0s,WorldUUIDMost:4274445143610573293L,HandDropChances:[0.085f,0.085f],PersistenceRequired:1b,Spigot.ticksLived:42147,Age:0,CollarColor:1b,Motion:[0.0d,-0.0784000015258789d,0.0d],Leashed:0b,UUIDLeast:-7796496611822457784L,Health:8.0f,Bukkit.updateLevel:2,LeftHanded:0b,Air:300s,OnGround:1b,Dimension:0,Rotation:[101.37413f,0.0f],HandItems:[{},{}],ArmorDropChances:[0.085f,0.085f,0.085f,0.085f],OwnerUUID:\"\",UUIDMost:4443869730051737981L,Pos:[446.5d,69.0d,421.5d],Fire:-1s,ArmorItems:[{},{},{},{}],CanPickUpLoot:0b,HurtTime:0s,WorldUUIDLeast:-8073140550504750389L}";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - Attributes/[2]/Base:0.30000001192092896d", " + Attributes/[2]/Base:0.0d", " - Attributes/[2]/Name:\"generic.movementSpeed\"", " + Attributes/[2]/Name:\"generic.armor\"", " - Attributes/[3]/Name:\"generic.armor\"", " + Attributes/[3]/Name:\"generic.armorToughness\"", " - Attributes/[4]/Base:0.0d", " + Attributes/[4]/Base:16.0d", " - Attributes/[4]/Name:\"generic.armorToughness\"", " + Attributes/[4]/Name:\"generic.followRange\"", " + Attributes/[4]/Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}]", " - Attributes/[5]/Base:16.0d", " + Attributes/[5]/Base:4.0d", " - Attributes/[5]/Name:\"generic.followRange\"", " + Attributes/[5]/Name:\"generic.attackDamage\"", " - Attributes/[5]/Modifiers:[{UUIDMost:-3095412869162188454L,UUIDLeast:-6283034937680631004L,Amount:0.055668478091697275d,Operation:1,Name:\"Random spawn bonus\"}]", " - Attributes/[6]:{Base:4.0d,Name:\"generic.attackDamage\"}");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testPlayerComparison() throws Exception{
        String nbtprev = "{HurtByTimestamp:0,bukkit:{newLevel:0,newExp:0,newTotalExp:0,firstPlayed:1537295623340L,lastKnownName:\"bla\",keepLevel:0b,expToDrop:0,lastPlayed:1539680452912L},SleepTimer:0s,Attributes:[{Base:20.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.10000000149011612d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:1.0d,Name:\"generic.attackDamage\"},{Base:4.0d,Name:\"generic.attackSpeed\"},{Base:0.0d,Name:\"generic.luck\"}],Invulnerable:0b,FallFlying:0b,PortalCooldown:0,AbsorptionAmount:0.0f,abilities:{invulnerable:1b,mayfly:1b,instabuild:1b,walkSpeed:0.1f,mayBuild:1b,flying:0b,flySpeed:0.05f},FallDistance:0.0f,recipeBook:{recipes:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isFilteringCraftable:0b,toBeDisplayed:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isGuiOpen:0b},DeathTime:0s,XpSeed:942738183,WorldUUIDMost:4274445143610573293L,XpTotal:11,playerGameType:1,seenCredits:0b,Motion:[0.0d,-0.0784000015258789d,0.0d],UUIDLeast:-7042360823602697849L,Health:20.0f,Bukkit.updateLevel:2,foodSaturationLevel:5.0f,Air:300s,OnGround:1b,Dimension:0,Glowing:1b,Rotation:[-8.552621f,32.09997f],XpLevel:1,Score:71,UUIDMost:1956384011718905599L,CustomName:\"sdfsadfsadfsafd\",Sleeping:0b,Pos:[192.92120281154197d,63.0d,743.9976793001044d],Fire:-20s,XpP:0.44444448f,EnderItems:[],DataVersion:1343,foodLevel:20,foodExhaustionLevel:0.0f,HurtTime:0s,SelectedItemSlot:3,SpawnWorld:\"world\",WorldUUIDLeast:-8073140550504750389L,Inventory:[{Slot:0b,id:\"minecraft:porkchop\",Count:8b,Damage:0s},{Slot:1b,id:\"minecraft:wheat_seeds\",Count:1b,Damage:0s},{Slot:2b,id:\"minecraft:egg\",Count:2b,Damage:0s},{Slot:3b,id:\"minecraft:dirt\",Count:1b,Damage:0s},{Slot:4b,id:\"minecraft:log\",Count:12b,Damage:0s},{Slot:5b,id:\"minecraft:cooked_porkchop\",Count:2b,Damage:0s},{Slot:19b,id:\"minecraft:porkchop\",Count:4b,Damage:0s},{Slot:21b,id:\"minecraft:porkchop\",Count:2b,Damage:0s},{Slot:31b,id:\"minecraft:log\",Count:6b,Damage:0s},{Slot:33b,id:\"minecraft:log\",Count:3b,Damage:0s},{Slot:34b,id:\"minecraft:sapling\",Count:2b,Damage:0s},{Slot:35b,id:\"minecraft:log\",Count:1b,Damage:0s}],foodTickTimer:0}\n";
        String nbtnext = "{HurtByTimestamp:0,bukkit:{newLevel:0,newExp:0,newTotalExp:0,firstPlayed:1537295623340L,lastKnownName:\"bla\",keepLevel:0b,expToDrop:0,lastPlayed:1539680453437L},SleepTimer:0s,Attributes:[{Base:20.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.10000000149011612d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:1.0d,Name:\"generic.attackDamage\"},{Base:4.0d,Name:\"generic.attackSpeed\"},{Base:0.0d,Name:\"generic.luck\"}],Invulnerable:0b,FallFlying:0b,PortalCooldown:0,AbsorptionAmount:0.0f,abilities:{invulnerable:1b,mayfly:1b,instabuild:1b,walkSpeed:0.1f,mayBuild:1b,flying:0b,flySpeed:0.05f},FallDistance:0.0f,recipeBook:{recipes:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isFilteringCraftable:0b,toBeDisplayed:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isGuiOpen:0b},DeathTime:0s,XpSeed:942738183,WorldUUIDMost:4274445143610573293L,XpTotal:11,playerGameType:1,seenCredits:0b,Motion:[0.0d,-0.0784000015258789d,0.0d],UUIDLeast:-7042360823602697849L,Health:20.0f,Bukkit.updateLevel:2,foodSaturationLevel:5.0f,Air:300s,OnGround:1b,Dimension:0,Glowing:1b,Rotation:[-11.25262f,31.949972f],XpLevel:1,Score:71,UUIDMost:1956384011718905599L,CustomName:\"sdfsadfsadfsafd\",Sleeping:0b,Pos:[192.1727576877097d,63.0d,745.2756819607715d],Fire:-20s,XpP:0.44444448f,EnderItems:[],DataVersion:1343,foodLevel:20,foodExhaustionLevel:0.0f,HurtTime:0s,SelectedItemSlot:3,SpawnWorld:\"world\",WorldUUIDLeast:-8073140550504750389L,Inventory:[{Slot:0b,id:\"minecraft:porkchop\",Count:8b,Damage:0s},{Slot:1b,id:\"minecraft:wheat_seeds\",Count:1b,Damage:0s},{Slot:2b,id:\"minecraft:egg\",Count:2b,Damage:0s},{Slot:3b,id:\"minecraft:dirt\",Count:1b,Damage:0s},{Slot:4b,id:\"minecraft:log\",Count:12b,Damage:0s},{Slot:5b,id:\"minecraft:cooked_porkchop\",Count:2b,Damage:0s},{Slot:19b,id:\"minecraft:porkchop\",Count:4b,Damage:0s},{Slot:21b,id:\"minecraft:porkchop\",Count:2b,Damage:0s},{Slot:31b,id:\"minecraft:log\",Count:6b,Damage:0s},{Slot:33b,id:\"minecraft:log\",Count:3b,Damage:0s},{Slot:34b,id:\"minecraft:sapling\",Count:2b,Damage:0s},{Slot:35b,id:\"minecraft:log\",Count:1b,Damage:0s}],foodTickTimer:0}\n";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - bukkit/lastPlayed:1539680452912L", " + bukkit/lastPlayed:1539680453437L", " - Rotation/[0]:-8.552621f", " + Rotation/[0]:-11.25262f", " - Rotation/[1]:32.09997f", " + Rotation/[1]:31.949972f", " - Pos/[0]:192.92120281154197d", " + Pos/[0]:192.1727576877097d", " - Pos/[2]:743.9976793001044d", " + Pos/[2]:745.2756819607715d");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }

    @Test
    public void testPlayerInventoryChange() throws Exception{
        String nbtprev = "{HurtByTimestamp:0,bukkit:{newLevel:0,newExp:0,newTotalExp:0,firstPlayed:1537295623340L,lastKnownName:\"bla\",keepLevel:0b,expToDrop:0,lastPlayed:1539680449946L},SleepTimer:0s,Attributes:[{Base:20.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.10000000149011612d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:1.0d,Name:\"generic.attackDamage\"},{Base:4.0d,Name:\"generic.attackSpeed\"},{Base:0.0d,Name:\"generic.luck\"}],Invulnerable:0b,FallFlying:0b,PortalCooldown:0,AbsorptionAmount:0.0f,abilities:{invulnerable:1b,mayfly:1b,instabuild:1b,walkSpeed:0.1f,mayBuild:1b,flying:0b,flySpeed:0.05f},FallDistance:0.0f,recipeBook:{recipes:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isFilteringCraftable:0b,toBeDisplayed:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isGuiOpen:0b},DeathTime:0s,XpSeed:942738183,WorldUUIDMost:4274445143610573293L,XpTotal:11,playerGameType:1,seenCredits:0b,Motion:[0.0d,-0.0784000015258789d,0.0d],UUIDLeast:-7042360823602697849L,Health:20.0f,Bukkit.updateLevel:2,foodSaturationLevel:5.0f,Air:300s,OnGround:1b,Dimension:0,Glowing:1b,Rotation:[-74.70262f,41.399982f],XpLevel:1,Score:71,UUIDMost:1956384011718905599L,CustomName:\"sdfsadfsadfsafd\",Sleeping:0b,Pos:[193.8193816502897d,63.0d,742.5563486838325d],Fire:-20s,XpP:0.44444448f,EnderItems:[],DataVersion:1343,foodLevel:20,foodExhaustionLevel:0.0f,HurtTime:0s,SelectedItemSlot:3,SpawnWorld:\"world\",WorldUUIDLeast:-8073140550504750389L,Inventory:[{Slot:0b,id:\"minecraft:porkchop\",Count:8b,Damage:0s},{Slot:1b,id:\"minecraft:wheat_seeds\",Count:1b,Damage:0s},{Slot:2b,id:\"minecraft:egg\",Count:2b,Damage:0s},{Slot:3b,id:\"minecraft:dirt\",Count:1b,Damage:0s},{Slot:4b,id:\"minecraft:log\",Count:12b,Damage:0s},{Slot:19b,id:\"minecraft:porkchop\",Count:4b,Damage:0s},{Slot:21b,id:\"minecraft:porkchop\",Count:2b,Damage:0s},{Slot:31b,id:\"minecraft:log\",Count:6b,Damage:0s},{Slot:33b,id:\"minecraft:log\",Count:3b,Damage:0s},{Slot:34b,id:\"minecraft:sapling\",Count:2b,Damage:0s},{Slot:35b,id:\"minecraft:log\",Count:1b,Damage:0s}],foodTickTimer:0}\n";
        String nbtnext = "{HurtByTimestamp:0,bukkit:{newLevel:0,newExp:0,newTotalExp:0,firstPlayed:1537295623340L,lastKnownName:\"bla\",keepLevel:0b,expToDrop:0,lastPlayed:1539680452912L},SleepTimer:0s,Attributes:[{Base:20.0d,Name:\"generic.maxHealth\"},{Base:0.0d,Name:\"generic.knockbackResistance\"},{Base:0.10000000149011612d,Name:\"generic.movementSpeed\"},{Base:0.0d,Name:\"generic.armor\"},{Base:0.0d,Name:\"generic.armorToughness\"},{Base:1.0d,Name:\"generic.attackDamage\"},{Base:4.0d,Name:\"generic.attackSpeed\"},{Base:0.0d,Name:\"generic.luck\"}],Invulnerable:0b,FallFlying:0b,PortalCooldown:0,AbsorptionAmount:0.0f,abilities:{invulnerable:1b,mayfly:1b,instabuild:1b,walkSpeed:0.1f,mayBuild:1b,flying:0b,flySpeed:0.05f},FallDistance:0.0f,recipeBook:{recipes:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isFilteringCraftable:0b,toBeDisplayed:[\"minecraft:yellow_concrete_powder\",\"minecraft:white_concrete_powder\",\"minecraft:spruce_planks\",\"minecraft:spruce_boat\",\"minecraft:sandstone\",\"minecraft:red_dye_from_poppy\",\"minecraft:red_concrete_powder\",\"minecraft:purple_concrete_powder\",\"minecraft:pink_concrete_powder\",\"minecraft:orange_concrete_powder\",\"minecraft:oak_planks\",\"minecraft:magenta_concrete_powder\",\"minecraft:lime_concrete_powder\",\"minecraft:light_gray_concrete_powder\",\"minecraft:light_blue_concrete_powder\",\"minecraft:jungle_boat\",\"minecraft:green_concrete_powder\",\"minecraft:gray_concrete_powder\",\"minecraft:dark_oak_boat\",\"minecraft:cyan_concrete_powder\",\"minecraft:chest\",\"minecraft:cake\",\"minecraft:brown_concrete_powder\",\"minecraft:boat\",\"minecraft:blue_concrete_powder\",\"minecraft:black_concrete_powder\",\"minecraft:birch_boat\",\"minecraft:acacia_boat\"],isGuiOpen:0b},DeathTime:0s,XpSeed:942738183,WorldUUIDMost:4274445143610573293L,XpTotal:11,playerGameType:1,seenCredits:0b,Motion:[0.0d,-0.0784000015258789d,0.0d],UUIDLeast:-7042360823602697849L,Health:20.0f,Bukkit.updateLevel:2,foodSaturationLevel:5.0f,Air:300s,OnGround:1b,Dimension:0,Glowing:1b,Rotation:[-8.552621f,32.09997f],XpLevel:1,Score:71,UUIDMost:1956384011718905599L,CustomName:\"sdfsadfsadfsafd\",Sleeping:0b,Pos:[192.92120281154197d,63.0d,743.9976793001044d],Fire:-20s,XpP:0.44444448f,EnderItems:[],DataVersion:1343,foodLevel:20,foodExhaustionLevel:0.0f,HurtTime:0s,SelectedItemSlot:3,SpawnWorld:\"world\",WorldUUIDLeast:-8073140550504750389L,Inventory:[{Slot:0b,id:\"minecraft:porkchop\",Count:8b,Damage:0s},{Slot:1b,id:\"minecraft:wheat_seeds\",Count:1b,Damage:0s},{Slot:2b,id:\"minecraft:egg\",Count:2b,Damage:0s},{Slot:3b,id:\"minecraft:dirt\",Count:1b,Damage:0s},{Slot:4b,id:\"minecraft:log\",Count:12b,Damage:0s},{Slot:5b,id:\"minecraft:cooked_porkchop\",Count:2b,Damage:0s},{Slot:19b,id:\"minecraft:porkchop\",Count:4b,Damage:0s},{Slot:21b,id:\"minecraft:porkchop\",Count:2b,Damage:0s},{Slot:31b,id:\"minecraft:log\",Count:6b,Damage:0s},{Slot:33b,id:\"minecraft:log\",Count:3b,Damage:0s},{Slot:34b,id:\"minecraft:sapling\",Count:2b,Damage:0s},{Slot:35b,id:\"minecraft:log\",Count:1b,Damage:0s}],foodTickTimer:0}\n";

        LinkedList<String> result = NbtDiffIter.diff(nbtprev, nbtnext, new LinkedList<>());
        System.out.println(result);

        Collections.sort(result);
        List<String> expected = Arrays.asList(" - bukkit/lastPlayed:1539680449946L", " + bukkit/lastPlayed:1539680452912L", " - Rotation/[0]:-74.70262f", " + Rotation/[0]:-8.552621f", " - Rotation/[1]:41.399982f", " + Rotation/[1]:32.09997f", " - Pos/[0]:193.8193816502897d", " + Pos/[0]:192.92120281154197d", " - Pos/[2]:742.5563486838325d", " + Pos/[2]:743.9976793001044d", " - Inventory/[5]/Slot:19b", " + Inventory/[5]/Slot:5b", " - Inventory/[5]/id:\"minecraft:porkchop\"", " + Inventory/[5]/id:\"minecraft:cooked_porkchop\"", " - Inventory/[5]/Count:4b", " + Inventory/[5]/Count:2b", " - Inventory/[6]/Slot:21b", " + Inventory/[6]/Slot:19b", " - Inventory/[6]/Count:2b", " + Inventory/[6]/Count:4b", " - Inventory/[7]/Slot:31b", " + Inventory/[7]/Slot:21b", " - Inventory/[7]/id:\"minecraft:log\"", " + Inventory/[7]/id:\"minecraft:porkchop\"", " - Inventory/[7]/Count:6b", " + Inventory/[7]/Count:2b", " - Inventory/[8]/Slot:33b", " + Inventory/[8]/Slot:31b", " - Inventory/[8]/Count:3b", " + Inventory/[8]/Count:6b", " - Inventory/[9]/Slot:34b", " + Inventory/[9]/Slot:33b", " - Inventory/[9]/id:\"minecraft:sapling\"", " + Inventory/[9]/id:\"minecraft:log\"", " - Inventory/[9]/Count:2b", " + Inventory/[9]/Count:3b", " - Inventory/[10]/Slot:35b", " + Inventory/[10]/Slot:34b", " - Inventory/[10]/id:\"minecraft:log\"", " + Inventory/[10]/id:\"minecraft:sapling\"", " - Inventory/[10]/Count:1b", " + Inventory/[10]/Count:2b", " + Inventory/[11]:{Slot:35b,id:\"minecraft:log\",Count:1b,Damage:0s}");
        Collections.sort(expected);
        Assert.assertArrayEquals(expected.toArray(), result.toArray());
    }
}
